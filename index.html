<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–∫–æ-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é */
        #debugInfo {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 10000;
            font-size: 12px;
            max-width: 300px;
        }
        
        /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ –∫–∞—Ä—Ç–∞ –≤–∏–¥–∏–º–∞ */
        #pollutionMap {
            height: 500px !important;
            background: #f8f9fa;
            border: 2px solid #ccc;
        }
        
        .leaflet-container {
            background: #f8f9fa !important;
        }
    </style>
</head>
<body>
    <div id="debugInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

    <header>
        <h1>üåç –≠–∫–æ-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h1>
        <p>–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã</p>
    </header>

    <main>
        <section class="stats">
            <div class="stat-card">
                <h3>üíß –ü–∏—Ç—å–µ–≤–∞—è –≤–æ–¥–∞</h3>
                <div class="counter">2.5%</div>
                <p>–ø—Ä–µ—Å–Ω–æ–π –≤–æ–¥—ã –æ—Å—Ç–∞–ª–æ—Å—å</p>
            </div>
            <div class="stat-card">
                <h3>üî• –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∂–∞—Ä—ã</h3>
                <div id="fireCounter" class="counter">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <p>–æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å–ø—É—Ç–Ω–∏–∫–∞–º–∏</p>
            </div>
            <div class="stat-card">
                <h3>üå´Ô∏è –ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞</h3>
                <div id="airQuality" class="counter">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <p>—Å—Ç–∞–Ω—Ü–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</p>
            </div>
        </section>

        <section class="map-section">
            <h2>–ö–∞—Ä—Ç–∞ —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h2>
            <div class="map-tabs">
                <button class="tab-btn active" onclick="showTab('air')">–ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞</button>
                <button class="tab-btn" onclick="showTab('fires')">–õ–µ—Å–Ω—ã–µ –ø–æ–∂–∞—Ä—ã</button>
            </div>
            <div id="map"></div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è -->
        <section id="historical-pollution" class="historical-section">
            <h2>üìä –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ (1800-2024)</h2>
            <div class="historical-controls">
                <div class="time-controls">
                    <label>–ì–æ–¥: <span id="currentYearDisplay">2024</span></label>
                    <input type="range" id="yearSlider" min="1800" max="2024" value="2024" class="timeline-slider">
                </div>
                <div class="data-type-buttons">
                    <button class="data-btn active" data-type="air">üå§Ô∏è –í–æ–∑–¥—É—Ö</button>
                    <button class="data-btn" data-type="water">üåä –í–æ–¥–∞</button>
                </div>
            </div>
            <div id="pollutionMap" style="height: 500px; margin: 20px 0; border-radius: 10px;"></div>
            <div class="pollution-info">
                <div id="pollutionStats" class="stats-card">
                    <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ <span id="statsYear">2024</span> –≥–æ–¥</h4>
                    <div id="airStats" class="stats-content">
                        <p>CO‚ÇÇ: <span id="co2Value">420</span> ppm</p>
                        <p>SO‚ÇÇ: <span id="so2Value">60</span> ¬µg/m¬≥</p>
                        <p>NO‚ÇÇ: <span id="no2Value">50</span> ¬µg/m¬≥</p>
                    </div>
                    <div id="waterStats" class="stats-content" style="display: none;">
                        <p>–°—Ç–∞–Ω—Ü–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: <span id="waterStationsCount">70</span></p>
                        <p>–°—Ä–µ–¥–Ω–µ–µ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ: <span id="avgWaterPollution">35</span>%</p>
                    </div>
                </div>
                <div class="legend">
                    <h4>–õ–µ–≥–µ–Ω–¥–∞</h4>
                    <div id="airLegend">
                        <div class="legend-item">
                            <span class="color-box air-excellent"></span>
                            <span>–û—Ç–ª–∏—á–Ω–æ–µ (0-12 ¬µg/m¬≥)</span>
                        </div>
                        <div class="legend-item">
                            <span class="color-box air-good"></span>
                            <span>–•–æ—Ä–æ—à–µ–µ (12-35 ¬µg/m¬≥)</span>
                        </div>
                        <div class="legend-item">
                            <span class="color-box air-moderate"></span>
                            <span>–£–º–µ—Ä–µ–Ω–Ω–æ–µ (35-55 ¬µg/m¬≥)</span>
                        </div>
                        <div class="legend-item">
                            <span class="color-box air-poor"></span>
                            <span>–ü–ª–æ—Ö–æ–µ (55-150 ¬µg/m¬≥)</span>
                        </div>
                        <div class="legend-item">
                            <span class="color-box air-very-poor"></span>
                            <span>–û—á–µ–Ω—å –ø–ª–æ—Ö–æ–µ (150+ ¬µg/m¬≥)</span>
                        </div>
                    </div>
                    <div id="waterLegend" style="display: none;">
                        <div class="legend-item">
                            <span class="color-box water-clean"></span>
                            <span>–ß–∏—Å—Ç–∞—è (0-20%)</span>
                        </div>
                        <div class="legend-item">
                            <span class="color-box water-moderate"></span>
                            <span>–£–º–µ—Ä–µ–Ω–Ω–∞—è (20-40%)</span>
                        </div>
                        <div class="legend-item">
                            <span class="color-box water-polluted"></span>
                            <span>–ó–∞–≥—Ä—è–∑–Ω–µ–Ω–Ω–∞—è (40-60%)</span>
                        </div>
                        <div class="legend-item">
                            <span class="color-box water-heavy-polluted"></span>
                            <span>–°–∏–ª—å–Ω–æ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–Ω–∞—è (60%+)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
        <!-- –°–µ–∫—Ü–∏—è –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è -->
        <section class="pollution-impact">
            <h2>üíî –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã</h2>
            <div class="impact-stats">
                <div class="impact-card">
                    <h3>üêæ –ü–æ–≥–∏–±—à–∏–µ –∂–∏–≤–æ—Ç–Ω—ã–µ</h3>
                    <div class="counter" id="animalDeaths">1.5 –º–ª–Ω</div>
                    <p>–≤ –≥–æ–¥ –∏–∑-–∑–∞ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã</p>
                    <div class="impact-details">
                        <p>‚Ä¢ 1 –º–ª–Ω –º–æ—Ä—Å–∫–∏—Ö –ø—Ç–∏—Ü</p>
                        <p>‚Ä¢ 100 —Ç—ã—Å –º–æ—Ä—Å–∫–∏—Ö –º–ª–µ–∫–æ–ø–∏—Ç–∞—é—â–∏—Ö</p>
                        <p>‚Ä¢ 400 —Ç—ã—Å –¥—Ä—É–≥–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö</p>
                    </div>
                </div>
                <div class="impact-card">
                    <h3>üë• –ü–æ–≥–∏–±—à–∏–µ –ª—é–¥–∏</h3>
                    <div class="counter" id="humanDeaths">9 –º–ª–Ω</div>
                    <p>–≤ –≥–æ–¥ –æ—Ç –±–æ–ª–µ–∑–Ω–µ–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ–º</p>
                    <div class="impact-details">
                        <p>‚Ä¢ 4.2 –º–ª–Ω –æ—Ç –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –≤–æ–∑–¥—É—Ö–∞</p>
                        <p>‚Ä¢ 2.2 –º–ª–Ω –æ—Ç –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –≤–æ–¥—ã</p>
                        <p>‚Ä¢ 2.6 –º–ª–Ω –æ—Ç –¥—Ä—É–≥–∏—Ö –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–π</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ -->
        <section class="recycling-calculator">
            <h2>üå± –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤</h2>
            <div class="calc-tabs">
                <button class="calc-tab active" onclick="showRecyclingTab('general', event)">‚ôªÔ∏è –û–±—â–∏–π —Ä–∞—Å—á–µ—Ç</button>
                <button class="calc-tab" onclick="showRecyclingTab('batteries', event)">üîã –ë–∞—Ç–∞—Ä–µ–π–∫–∏</button>
                <button class="calc-tab" onclick="showRecyclingTab('bottles', event)">ü•§ –ë—É—Ç—ã–ª–∫–∏</button>
            </div>

            <div id="generalRecycling" class="recycling-form active">
                <div class="input-group">
                    <label>üìÑ –ú–∞–∫—É–ª–∞—Ç—É—Ä–∞ (–∫–≥):</label>
                    <input type="number" id="paperWaste" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–≥" min="0">
                </div>
                <div class="input-group">
                    <label>ü•§ –ü–ª–∞—Å—Ç–∏–∫ (–∫–≥):</label>
                    <input type="number" id="plasticWaste" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–≥" min="0">
                </div>
                <div class="input-group">
                    <label>üç∂ –°—Ç–µ–∫–ª–æ (–∫–≥):</label>
                    <input type="number" id="glassWaste" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–≥" min="0">
                </div>
                <div class="input-group">
                    <label>üî© –ú–µ—Ç–∞–ª–ª (–∫–≥):</label>
                    <input type="number" id="metalWaste" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–≥" min="0">
                </div>
                <button onclick="calculateResourceSavings()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã</button>
            </div>

            <div id="batteriesRecycling" class="recycling-form">
                <div class="input-group">
                    <label>üîã –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ç–∞—Ä–µ–µ–∫ (—à—Ç):</label>
                    <input type="number" id="batteriesCount" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="0">
                </div>
                <div class="battery-info">
                    <p>üí° 1 –±–∞—Ç–∞—Ä–µ–π–∫–∞ –∑–∞–≥—Ä—è–∑–Ω—è–µ—Ç 20 –º¬≤ –∑–µ–º–ª–∏ –∏ 400 –ª –≤–æ–¥—ã</p>
                </div>
                <button onclick="calculateBatteriesSavings()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç</button>
            </div>

            <div id="bottlesRecycling" class="recycling-form">
                <div class="input-group">
                    <label>ü•§ –ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–µ –±—É—Ç—ã–ª–∫–∏ (—à—Ç):</label>
                    <input type="number" id="plasticBottles" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="0">
                </div>
                <div class="input-group">
                    <label>üç∂ –°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –±—É—Ç—ã–ª–∫–∏ (—à—Ç):</label>
                    <input type="number" id="glassBottles" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="0">
                </div>
                <div class="input-group">
                    <label>ü•´ –ê–ª—é–º–∏–Ω–∏–µ–≤—ã–µ –±–∞–Ω–∫–∏ (—à—Ç):</label>
                    <input type="number" id="aluminumCans" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ" min="0">
                </div>
                <button onclick="calculateBottlesSavings()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —ç–∫–æ–Ω–æ–º–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤</button>
            </div>

            <div id="recyclingResult" class="result savings-result"></div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —É–≥–ª–µ—Ä–æ–¥–Ω–æ–≥–æ —Å–ª–µ–¥–∞ -->
        <section class="calculator">
            <h2>üåç –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —É–≥–ª–µ—Ä–æ–¥–Ω–æ–≥–æ —Å–ª–µ–¥–∞</h2>
            <div class="calc-form">
                <div class="input-group">
                    <label>üöó –ü—Ä–æ–±–µ–≥ –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ –≤ –º–µ—Å—è—Ü (–∫–º):</label>
                    <input type="number" id="carKm" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–∏–ª–æ–º–µ—Ç—Ä—ã">
                </div>
                <div class="input-group">
                    <label>üí° –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏ –≤ –º–µ—Å—è—Ü (–∫–í—Ç¬∑—á):</label>
                    <input type="number" id="electricity" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–í—Ç¬∑—á">
                </div>
                <div class="input-group">
                    <label>‚úàÔ∏è –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ª–µ—Ç–æ–≤ –≤ –≥–æ–¥:</label>
                    <input type="number" id="flights" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–ª–µ—Ç–æ–≤">
                </div>
                <button onclick="calculateCarbonFootprint()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —É–≥–ª–µ—Ä–æ–¥–Ω—ã–π —Å–ª–µ–¥</button>
                <div id="carbonResult" class="result"></div>
            </div>
        </section>
    </main>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="app.js"></script>
    <script src="calculator.js"></script>
    
    <!-- –ó–∞–º–µ–Ω—è–µ–º historical-map.js –Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –≤–µ—Ä—Å–∏—é -->
    <script>
        // historical-map.js - –û–¢–õ–ê–î–û–ß–ù–ê–Ø –í–ï–†–°–ò–Ø
        console.log("historical-map.js –∑–∞–≥—Ä—É–∂–µ–Ω");

        function showDebugInfo(message) {
            const debugDiv = document.getElementById('debugInfo');
            if (debugDiv) {
                debugDiv.innerHTML = message + ' - ' + new Date().toLocaleTimeString();
            }
            console.log("DEBUG:", message);
        }

        class HistoricalPollutionMap {
            constructor() {
                console.log("–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä HistoricalPollutionMap –≤—ã–∑–≤–∞–Ω");
                this.currentYear = 2024;
                this.currentDataType = 'air';
                this.currentMarkers = [];
                this.initMap();
            }

            initMap() {
                console.log("initMap() –≤—ã–∑–≤–∞–Ω");
                
                const mapContainer = document.getElementById('pollutionMap');
                console.log("–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã:", mapContainer);
                
                if (!mapContainer) {
                    console.error('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã pollutionMap –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                    showDebugInfo('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }

                try {
                    console.log("–ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É Leaflet...");
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ Leaflet
                    if (typeof L === 'undefined') {
                        console.error('‚ùå Leaflet –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                        showDebugInfo('‚ùå Leaflet –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                        return;
                    }
                    
                    console.log("Leaflet –¥–æ—Å—Ç—É–ø–µ–Ω:", L);
                    
                    // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É
                    this.map = L.map('pollutionMap').setView([55.7558, 37.6173], 3);
                    console.log("–ö–∞—Ä—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞:", this.map);
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ–π –∫–∞—Ä—Ç—ã
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '¬© OpenStreetMap contributors',
                        maxZoom: 18
                    }).addTo(this.map);
                    
                    console.log("‚úÖ –ö–∞—Ä—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞");
                    showDebugInfo('‚úÖ –ö–∞—Ä—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞');
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä–∫–µ—Ä
                    L.marker([55.7558, 37.6173])
                        .addTo(this.map)
                        .bindPopup('–¢–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä–∫–µ—Ä - –ú–æ—Å–∫–≤–∞')
                        .openPopup();
                        
                    this.setupEventListeners();
                    
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã:', error);
                    showDebugInfo('‚ùå –û—à–∏–±–∫–∞: ' + error.message);
                }
            }

            setupEventListeners() {
                console.log("setupEventListeners() –≤—ã–∑–≤–∞–Ω");
                
                // –°–ª–∞–π–¥–µ—Ä –≥–æ–¥–∞
                const yearSlider = document.getElementById('yearSlider');
                const yearDisplay = document.getElementById('currentYearDisplay');
                
                console.log("–°–ª–∞–π–¥–µ—Ä:", yearSlider, "–î–∏—Å–ø–ª–µ–π:", yearDisplay);
                
                if (yearSlider && yearDisplay) {
                    yearSlider.addEventListener('input', (e) => {
                        this.currentYear = parseInt(e.target.value);
                        yearDisplay.textContent = this.currentYear;
                        console.log("–ì–æ–¥ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞:", this.currentYear);
                        this.loadDataForYear(this.currentYear);
                    });
                }

                // –ö–Ω–æ–ø–∫–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
                const dataButtons = document.querySelectorAll('.data-btn');
                console.log("–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫:", dataButtons.length);
                
                dataButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        console.log("–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞:", e.target.dataset.type);
                        dataButtons.forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentDataType = e.target.dataset.type;
                        console.log("–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω –Ω–∞:", this.currentDataType);
                        this.loadDataForYear(this.currentYear);
                    });
                });

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                this.loadDataForYear(this.currentYear);
            }

            loadDataForYear(year) {
                console.log(`–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥–æ–¥–∞ ${year}, —Ç–∏–ø: ${this.currentDataType}`);
                
                // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –º–∞—Ä–∫–µ—Ä—ã
                this.clearMarkers();
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                if (this.currentDataType === 'air') {
                    this.addTestAirData();
                } else {
                    this.addTestWaterData();
                }
                
                showDebugInfo(`‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞ ${year} –≥–æ–¥ –∑–∞–≥—Ä—É–∂–µ–Ω—ã`);
            }

            clearMarkers() {
                if (this.currentMarkers && this.currentMarkers.length > 0) {
                    this.currentMarkers.forEach(marker => {
                        if (marker && this.map.hasLayer(marker)) {
                            this.map.removeLayer(marker);
                        }
                    });
                    this.currentMarkers = [];
                }
            }

            addTestAirData() {
                // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–∞—á–µ—Å—Ç–≤–µ –≤–æ–∑–¥—É—Ö–∞
                const cities = [
                    { name: "–ú–æ—Å–∫–≤–∞", lat: 55.7558, lng: 37.6173, pm25: 25 },
                    { name: "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", lat: 59.9343, lng: 30.3351, pm25: 18 },
                    { name: "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", lat: 55.0084, lng: 82.9357, pm25: 32 },
                    { name: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", lat: 56.8389, lng: 60.6057, pm25: 28 },
                    { name: "–ö–∞–∑–∞–Ω—å", lat: 55.7961, lng: 49.1064, pm25: 22 }
                ];

                cities.forEach(city => {
                    const marker = L.circleMarker([city.lat, city.lng], {
                        radius: 15,
                        fillColor: this.getAirQualityColor(this.getAirQualityByValue(city.pm25)),
                        color: '#000',
                        weight: 1,
                        opacity: 0.8,
                        fillOpacity: 0.7
                    }).addTo(this.map);

                    marker.bindPopup(`
                        <div style="min-width: 200px;">
                            <strong>${city.name}</strong><br>
                            <strong>–ì–æ–¥:</strong> ${this.currentYear}<br>
                            <strong>PM2.5:</strong> ${city.pm25} ¬µg/m¬≥<br>
                            <strong>–ö–∞—á–µ—Å—Ç–≤–æ:</strong> ${this.getAirQualityText(this.getAirQualityByValue(city.pm25))}
                        </div>
                    `);

                    this.currentMarkers.push(marker);
                });
            }

            addTestWaterData() {
                // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∫–∞—á–µ—Å—Ç–≤–µ –≤–æ–¥—ã
                const rivers = [
                    { name: "–í–æ–ª–≥–∞", lat: 56.1309, lng: 44.0002, pollution: 25 },
                    { name: "–î–Ω–µ–ø—Ä", lat: 50.4501, lng: 30.5234, pollution: 35 },
                    { name: "–î–æ–Ω", lat: 47.2226, lng: 39.7187, pollution: 45 },
                    { name: "–û–±—å", lat: 55.0113, lng: 82.9346, pollution: 30 }
                ];

                rivers.forEach(river => {
                    const marker = L.circleMarker([river.lat, river.lng], {
                        radius: 12,
                        fillColor: this.getWaterQualityColor(river.pollution),
                        color: '#000',
                        weight: 1,
                        opacity: 0.8,
                        fillOpacity: 0.7
                    }).addTo(this.map);

                    marker.bindPopup(`
                        <div style="min-width: 200px;">
                            <strong>${river.name}</strong><br>
                            <strong>–ì–æ–¥:</strong> ${this.currentYear}<br>
                            <strong>–ó–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ:</strong> ${river.pollution}%<br>
                            <strong>–ö–∞—á–µ—Å—Ç–≤–æ:</strong> ${this.getWaterQualityText(river.pollution)}
                        </div>
                    `);

                    this.currentMarkers.push(marker);
                });
            }

            getAirQualityByValue(pm25) {
                if (pm25 <= 12) return 'excellent';
                if (pm25 <= 35) return 'good';
                if (pm25 <= 55) return 'moderate';
                if (pm25 <= 150) return 'poor';
                return 'very-poor';
            }

            getAirQualityColor(quality) {
                const colors = {
                    'excellent': '#00e400',
                    'good': '#ffff00',
                    'moderate': '#ff7e00',
                    'poor': '#ff0000',
                    'very-poor': '#8f3f97'
                };
                return colors[quality] || '#cccccc';
            }

            getWaterQualityColor(pollution) {
                if (pollution < 20) return '#1e90ff';
                if (pollution < 40) return '#00ced1';
                if (pollution < 60) return '#ffa500';
                return '#ff4500';
            }

            getAirQualityText(quality) {
                const texts = {
                    'excellent': '–û—Ç–ª–∏—á–Ω–æ–µ',
                    'good': '–•–æ—Ä–æ—à–µ–µ',
                    'moderate': '–£–º–µ—Ä–µ–Ω–Ω–æ–µ',
                    'poor': '–ü–ª–æ—Ö–æ–µ',
                    'very-poor': '–û—á–µ–Ω—å –ø–ª–æ—Ö–æ–µ'
                };
                return texts[quality] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            }

            getWaterQualityText(pollution) {
                if (pollution < 20) return '–û—Ç–ª–∏—á–Ω–æ–µ';
                if (pollution < 40) return '–•–æ—Ä–æ—à–µ–µ';
                if (pollution < 60) return '–£–º–µ—Ä–µ–Ω–Ω–æ–µ';
                return '–ü–ª–æ—Ö–æ–µ';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log("‚úÖ DOM –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω");
            showDebugInfo('DOM –∑–∞–≥—Ä—É–∂–µ–Ω - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —ç–ª–µ–º–µ–Ω—Ç –∫–∞—Ä—Ç—ã
            const mapContainer = document.getElementById('pollutionMap');
            console.log("–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã –ø—Ä–∏ DOMContentLoaded:", mapContainer);
            
            if (mapContainer) {
                console.log("‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É...");
                try {
                    window.historicalMap = new HistoricalPollutionMap();
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π –∫–∞—Ä—Ç—ã:', error);
                    showDebugInfo('‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç—ã: ' + error.message);
                }
            } else {
                console.error('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã pollutionMap –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM');
                showDebugInfo('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω');
            }
        });

        // –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –∫–æ–≥–¥–∞ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
        window.addEventListener('load', function() {
            console.log("‚úÖ –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã");
            showDebugInfo('‚úÖ –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        });
    </script>
</body>
</html>
